(this["webpackJsonpjim-framed"]=this["webpackJsonpjim-framed"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n(1),r=n.n(c),a=n(17),s=n.n(a),o=(n(28),n(8)),l=n.n(o),u=n(4),d=n(18),h=n(2),j=(n(30),n(31),n(32)),b=function(){var e=Object(c.useState)(window.innerWidth),t=Object(h.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e=function(){return i(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{width:n}},f=760,g=function(e){var t=e.className,n=e.images,c=e.rowTargetHeight,r=void 0===c?400:c,a=e.borderOffset,s=void 0===a?5:a,o=e.onClick,l=e.outerPadding,u=void 0===l?60:l,d=b().width-u,h=function(e,t){t=t||1;var n=e.height-t;return e.width=e.width*(n/e.height),e.height=n,e},j=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].width;return t+=(e.length-1)*s},f=function(){for(var e=0,t=0,i=0,c=[],a=function(){for(var e=[],t=0;t<n.length;t++){var i=parseInt(n[t].width),c=parseInt(n[t].height);i*=r/c;var a={id:n[t].id,author:n[t].author,authorsAvatarUrl:n[t].authorsAvatarUrl,data:n[t].date,gameName:n[t].gameName,score:n[t].score,fullWidth:n[t].width,fullHeight:n[t].height,shotUrl:n[t].shotUrl,thumbnailUrl:n[t].thumbnailUrl,width:i,height:r};e.push(a)}return e}();a[i];)t>=d&&(e++,t=0),c[e]||(c[e]=[]),c[e].push(a[i]),t+=a[i].width,i++;return c},g=function(e){for(var t=0;t<e.length;t++)(n=e[t]).width=parseInt(n.width),n.height=parseInt(n.height);var n;return e},v=function(e){for(;j(e)>d;)for(var t=0;t<e.length;t++)e[t]=h(e[t]);return e};return function(){for(var e=f(),n=0;n<e.length;n++){e[n]=v(e[n]),e[n]=g(e[n]);var c=d-j(e[n]),r=e[n].length;if(r>1&&c<10){for(var a=c/r,l=0;l<e[n].length;l++)e[n][l].width+=a;e[n]=g(e[n]),e[n][e[n].length-1].width+=d-j(e[n])}}return function(e){return Object(i.jsx)("div",{className:t,children:e.map((function(e,t){return Object(i.jsx)("div",{className:"image-row",children:e.map((function(e,t){return Object(i.jsx)("img",{alt:e.gameName,src:e.thumbnailUrl,style:{marginRight:s,marginBottom:s,width:Math.ceil(e.width),height:e.height,cursor:"pointer"},onClick:function(){return o(e,t)}},t)}))},t)}))})}(e)}()},v=n(5),O=n.n(v),m=function(){return Object(i.jsxs)("div",{className:"sort-icon",children:[Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#fff",children:Object(i.jsx)("g",{children:Object(i.jsx)("path",{d:"M286.935,197.286L159.028,69.379c-3.613-3.617-7.895-5.424-12.847-5.424s-9.233,1.807-12.85,5.424L5.424,197.286\r C1.807,200.9,0,205.184,0,210.132s1.807,9.233,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428h255.813\r c4.949,0,9.233-1.811,12.848-5.428c3.613-3.613,5.427-7.898,5.427-12.847S290.548,200.9,286.935,197.286z"})})}),Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#aaa",children:Object(i.jsx)("g",{children:Object(i.jsx)("path",{d:"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\r C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\r s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z"})})})]})},x=function(){return Object(i.jsxs)("div",{className:"sort-icon",children:[Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#aaa",children:Object(i.jsx)("g",{children:Object(i.jsx)("path",{d:"M286.935,197.286L159.028,69.379c-3.613-3.617-7.895-5.424-12.847-5.424s-9.233,1.807-12.85,5.424L5.424,197.286\r C1.807,200.9,0,205.184,0,210.132s1.807,9.233,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428h255.813\r c4.949,0,9.233-1.811,12.848-5.428c3.613-3.613,5.427-7.898,5.427-12.847S290.548,200.9,286.935,197.286z"})})}),Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#fff",children:Object(i.jsx)("g",{children:Object(i.jsx)("path",{d:"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\r C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\r s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z"})})})]})},p=function(){return Object(i.jsx)("div",{className:"framed-icon",children:Object(i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",viewBox:"0 0 2048 2048",fill:"#9A9A9A",children:[Object(i.jsx)("g",{children:Object(i.jsx)("g",{children:Object(i.jsx)("path",{d:"M892.3,688v242h539v247.2h-539v411.9H609.1v-1150h889.1V688H892.3z"})})}),Object(i.jsx)("path",{d:"M143.6,138.5v1760.9h1760.9V138.5H143.6z M1783.8,1778.7H264.2V259.2h1519.6V1778.7z"})]})})},w=function(){return Object(i.jsxs)("svg",{viewBox:"0 0 80 80",width:"40",height:"30",fill:"#fff",children:[Object(i.jsx)("rect",{y:"15",width:"80",height:"10"}),Object(i.jsx)("rect",{y:"35",width:"80",height:"10"}),Object(i.jsx)("rect",{y:"55",width:"80",height:"10"})]})},N=function(e){var t,n,r=e.className,a=e.options,s=e.reverseSort,o=e.updateSort,l=e.updateType,u=e.updateSearch,d=Object(c.useState)(a[0]),j=Object(h.a)(d,2),g=j[0],v=j[1],N=Object(c.useState)("All"),y=Object(h.a)(N,2),S=y[0],C=y[1],k=Object(c.useState)(""),L=Object(h.a)(k,2),z=L[0],I=L[1],P=s?Object(i.jsx)(m,{}):Object(i.jsx)(x,{}),E=Object(i.jsx)("div",{className:"search",children:Object(i.jsx)("input",{type:"search",name:"search",className:"search-input",placeholder:"Search",value:z,onChange:function(e){I(e.target.value),u(e.target.value.toLowerCase())}})}),B=Object(i.jsx)("ul",{className:"filters",children:a.map((function(e,t){var n=g.key===e.key,c=n?"is-active":void 0;return Object(i.jsx)("li",{children:Object(i.jsx)("button",{className:O()("filter",c),onClick:function(){return v(t=e),void o(t);var t},children:Object(i.jsxs)(i.Fragment,{children:[e.label,n&&P]})},e.label)},t)}))}),A=Object(i.jsx)("div",{className:"image-types",children:["All","Wide","Portrait"].map((function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",{id:"".concat(e,"-label"),onChange:function(){return C(t=e),void l(t);var t},checked:S===e,type:"radio",value:e,name:"type"},"".concat(e,"-input")),Object(i.jsx)("label",{htmlFor:"".concat(e,"-label"),children:e},"".concat(e,"-label"))]})}))}),F=Object(c.useState)(!1),H=Object(h.a)(F,2),M=H[0],U=H[1],T=b().width<=f,W=T?"image-nav--mobile":"image-nav--desktop",R=Object(c.useRef)(null);return t=R,n=function(){U(!1)},Object(c.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&n()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(c.useEffect)((function(){T||U(!1)}),[T]),Object(i.jsxs)("div",{className:"image-nav ".concat(W," ").concat(r),children:[Object(i.jsx)(p,{}),!T&&Object(i.jsxs)(i.Fragment,{children:[B,A,E]}),T&&Object(i.jsxs)("div",{className:"mobile-menu",ref:R,children:[Object(i.jsx)("button",{className:"menu-button",onClick:function(){return U((function(e){return!e}))},children:Object(i.jsx)(w,{})}),M&&Object(i.jsxs)("div",{className:"mobile-menu-content",children:[E,B,A]})]})]})},y=n(19),S=n(20),C=n(6),k=n(22),L=n(21),z=function(e){Object(k.a)(n,e);var t=Object(L.a)(n);function n(e){var i;return Object(y.a)(this,n),(i=t.call(this,e)).renderSpinner=i.renderSpinner.bind(Object(C.a)(i)),i.baseClass="framed-spinner",i}return Object(S.a)(n,[{key:"renderSpinner",value:function(){return this.spinnerContainer}},{key:"render",value:function(){return this.props.show?this.renderSpinner():null}},{key:"svgSpinner",get:function(){return Object(i.jsxs)("div",{className:"".concat(this.baseClass,"-svg-wrapper"),children:[Object(i.jsx)("svg",{className:"".concat(this.baseClass,"-svg-back"),viewBox:"0 0 200 200",children:Object(i.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none"})}),Object(i.jsx)("svg",{className:"".concat(this.baseClass,"-svg-segment"),viewBox:"0 0 200 200",children:Object(i.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none"})})]})}},{key:"spinnerContainer",get:function(){var e=!!this.props.modifier&&"global";return Object(i.jsx)("div",{className:"".concat(this.baseClass,"-container ").concat(e),children:this.spinner})}},{key:"spinner",get:function(){var e=this.props,t=e.className,n=e.modifier;return Object(i.jsx)("div",{className:O()(this.baseClass,"".concat(this.baseClass,"--").concat(n),t),children:this.svgSpinner})}}]),n}(c.PureComponent);z.defaultProps={show:!1,modifier:""};var I=z,P=function(e,t){switch(t.type){case"initialize":return Object(u.a)(Object(u.a)({},e),{},{initialized:!0});case"close":return{initialized:!1,loadedState:!1};case"loadImage":return{initialized:!0,loadedState:!0};case"changeImage":return Object(u.a)(Object(u.a)({},e),{},{loadedState:!1});default:return e}},E=function(e){var t=e.image,n=void 0===t?{}:t,r=e.show,a=e.onClose,s=e.data,o=e.onPrev,l=e.onNext,u=Object(c.useReducer)(P,{initialized:!1,loadedState:!1}),d=Object(h.a)(u,2),j=d[0],b=j.initialized,f=j.loadedState,g=d[1],v=r?"is-visible":void 0,m=0===s.findIndex((function(e){return e.id===n.id}))||!f,x=s.findIndex((function(e){return e.id===n.id}))===s.length-1||!f,p=function(e){null===e||void 0===e||e.stopPropagation(),g({type:"changeImage"}),o()},w=function(e){null===e||void 0===e||e.stopPropagation(),g({type:"changeImage"}),l()},N=function(){g({type:"close"}),a()},y=function(e){var t=e.key;if(f){if("ArrowRight"===t&&!x)return w();if("ArrowLeft"===t&&!m)return p()}return!1};Object(c.useEffect)((function(){return window.addEventListener("keyup",y),function(){window.removeEventListener("keyup",y)}}),[b]);var S=b?"":"global";return Object(i.jsxs)("div",{className:O()("image-viewer",v),onClick:N,children:[Object(i.jsxs)("div",{className:"image-nav",children:[Object(i.jsx)("button",{className:"image-nav-button left",disabled:m,onClick:p,children:"[ Prev ]"}),Object(i.jsx)("button",{className:"image-nav-button right",disabled:x,onClick:w,children:"[ Next ]"})]}),Object(i.jsxs)("div",{className:"image-viewer-content",children:[n&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("img",{alt:n.gameName,src:n.shotUrl,onClick:function(e){e.stopPropagation()},onLoad:function(){g({type:"loadImage"})}}),b&&Object(i.jsxs)("div",{className:"author",onClick:function(e){e.stopPropagation()},children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"by"})," ",Object(i.jsx)("strong",{children:n.author})]}),Object(i.jsx)("div",{className:"title",children:n.gameName})]})]}),Object(i.jsx)(I,{modifier:S,show:!f}),Object(i.jsx)("button",{className:"close",onClick:N})]})]})},B=function(e){var t=e.data,n=[{label:"Date",key:"date"},{label:"Popularity",key:"score"}],r=Object(c.useState)([]),a=Object(h.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)(n[0]),u=Object(h.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)("all"),f=Object(h.a)(b,2),v=f[0],O=f[1],m=Object(c.useState)(""),x=Object(h.a)(m,2),p=x[0],w=x[1],y=Object(c.useState)(!1),S=Object(h.a)(y,2),C=S[0],k=S[1],L=Object(c.useState)({}),z=Object(h.a)(L,2),I=z[0],P=z[1],B=Object(c.useState)(!1),A=Object(h.a)(B,2),F=A[0],H=A[1],M=function(e){var t=e,n=d.key,i=function(e,t){return e[n]<t[n]?1:t[n]<e[n]?-1:0};return F&&(i=function(e,t){return e[n]>t[n]?1:t[n]>e[n]?-1:0}),t=e.sort(i),"Wide"===v?t=t.filter((function(e){return e.width>=e.height})):"Portrait"===v&&(t=t.filter((function(e){return e.width<=e.height}))),function(e){return(null===p||void 0===p?void 0:p.length)<3?e:e.filter((function(e){return Object.keys(e).reduce((function(t,n){return t||e[n].toString().toLowerCase().includes(p.toLowerCase())}),!1)}))}(t)};Object(c.useEffect)((function(){if(t.length){var e=M(t.slice());o(e)}}),[t,d,v,p,F]);var U=document.querySelector(".image-grid");return Object(i.jsxs)("div",{style:{margin:"0 auto"},className:"home",children:[Object(i.jsx)(N,{className:C?"hidden":"",options:n,reverseSort:F,updateSort:function(e){e.key===d.key?H((function(e){return!e})):(H(!1),j(e))},updateType:function(e){O(e)},updateSearch:function(e){w(e)}}),s&&U&&Object(i.jsx)(g,{className:"image-rows",images:s,rowTargetHeight:400,container:U,onClick:function(e){P(e),k(!0)}}),Object(i.jsx)(E,{image:I,show:C,onClose:function(){P({}),k(!1)},data:s,onPrev:function(){var e=s.findIndex((function(e){return e.id===I.id}));e-1>=0&&P(s[e-1])},onNext:function(){var e=s.findIndex((function(e){return e.id===I.id}));e+1<=s.length&&P(s[e+1])}})]})};var A=function(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(h.a)(a,2),o=s[0],b=s[1],f=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,j.get("".concat("https://raw.githubusercontent.com/originalnicodrgitbot/hall-of-framed-db/main/shotsdb.json"));case 3:t=e.sent,n=Object.entries(t.data._default),i=[],n.forEach((function(e){var t=e[0],n=e[1];i.push(Object(u.a)({id:t},n))})),r(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o||f()})),Object(i.jsx)("div",{className:"image-grid",children:n&&Object(i.jsx)(B,{data:n})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),c(e),r(e),a(e)}))};s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(A,{})}),document.getElementById("root")),F()}},[[51,1,2]]]);
//# sourceMappingURL=main.2047589c.chunk.js.map