(this["webpackJsonpjim-framed"]=this["webpackJsonpjim-framed"]||[]).push([[0],{23:function(t,e,n){},25:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n(1),i=n.n(r),a=n(15),s=n.n(a),o=(n(23),n(6)),u=n.n(o),l=n(17),h=n(16),d=n(2),j=(n(25),n(26));function b(t){return{maxWidth:t.clientWidth}}var f=function(t){var e=t.className,n=t.images,i=t.rowTargetHeight,a=void 0===i?400:i,s=t.borderOffset,o=void 0===s?5:s,u=t.container,l=t.onClick,h=function(t){var e=Object(r.useState)(b(t)),n=Object(d.a)(e,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){function e(){i(b(t))}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),c}(u).maxWidth,j=function(t,e){e=e||1;var n=t.height-e;return t.width=t.width*(n/t.height),t.height=n,t},f=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e+=(t.length-1)*o},g=function(){for(var t=0,e=0,c=0,r=[],i=function(){for(var t=[],e=0;e<n.length;e++){var c=parseInt(n[e].width),r=parseInt(n[e].height);c*=a/r;var i={id:n[e].id,author:n[e].author,authorsAvatarUrl:n[e].authorsAvatarUrl,data:n[e].date,gameName:n[e].gameName,score:n[e].score,fullWidth:n[e].width,fullHeight:n[e].height,shotUrl:n[e].shotUrl,thumbnailUrl:n[e].thumbnailUrl,width:c,height:a};t.push(i)}return t}();i[c];)e>=h&&(t++,e=0),r[t]||(r[t]=[]),r[t].push(i[c]),e+=i[c].width,c++;return r},v=function(t){for(var e=0;e<t.length;e++)(n=t[e]).width=parseInt(n.width),n.height=parseInt(n.height);var n;return t},O=function(t){for(;f(t)>h;)for(var e=0;e<t.length;e++)t[e]=j(t[e]);return t};return function(){for(var t=g(),n=0;n<t.length;n++){t[n]=O(t[n]),t[n]=v(t[n]);var r=h-f(t[n]),i=t[n].length;if(i>1&&r<10){for(var a=r/i,s=0;s<t[n].length;s++)t[n][s].width+=a;t[n]=v(t[n]),t[n][t[n].length-1].width+=h-f(t[n])}}return function(t){return Object(c.jsx)("div",{className:e,children:t.map((function(t,e){return Object(c.jsx)("div",{className:"image-row",children:t.map((function(t,e){return Object(c.jsx)("img",{alt:t.gameName,src:t.thumbnailUrl,style:{marginRight:o,marginBottom:o,width:Math.ceil(t.width),height:t.height,cursor:"pointer"},onClick:function(){return l(t,e)}},e)}))},e)}))})}(t)}()},g=n(4),v=n.n(g),O=function(){return Object(c.jsxs)("div",{className:"sort-icon",children:[Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#fff",children:Object(c.jsx)("g",{children:Object(c.jsx)("path",{d:"M286.935,197.286L159.028,69.379c-3.613-3.617-7.895-5.424-12.847-5.424s-9.233,1.807-12.85,5.424L5.424,197.286\r C1.807,200.9,0,205.184,0,210.132s1.807,9.233,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428h255.813\r c4.949,0,9.233-1.811,12.848-5.428c3.613-3.613,5.427-7.898,5.427-12.847S290.548,200.9,286.935,197.286z"})})}),Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#aaa",children:Object(c.jsx)("g",{children:Object(c.jsx)("path",{d:"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\r C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\r s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z"})})})]})},m=function(){return Object(c.jsxs)("div",{className:"sort-icon",children:[Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#aaa",children:Object(c.jsx)("g",{children:Object(c.jsx)("path",{d:"M286.935,197.286L159.028,69.379c-3.613-3.617-7.895-5.424-12.847-5.424s-9.233,1.807-12.85,5.424L5.424,197.286\r C1.807,200.9,0,205.184,0,210.132s1.807,9.233,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428h255.813\r c4.949,0,9.233-1.811,12.848-5.428c3.613-3.613,5.427-7.898,5.427-12.847S290.548,200.9,286.935,197.286z"})})}),Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 292 292",fill:"#fff",children:Object(c.jsx)("g",{children:Object(c.jsx)("path",{d:"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\r C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\r s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z"})})})]})},x=function(t){var e=t.className,n=t.options,i=t.reverseSort,a=t.updateSort,s=t.updateType,o=t.updateSearch,u=Object(r.useState)(n[0]),l=Object(d.a)(u,2),h=l[0],j=l[1],b=Object(r.useState)("All"),f=Object(d.a)(b,2),g=f[0],x=f[1],p=Object(r.useState)(""),w=Object(d.a)(p,2),N=w[0],C=w[1],S=i?Object(c.jsx)(O,{}):Object(c.jsx)(m,{});return Object(c.jsxs)("div",{className:"image-nav ".concat(e),children:[Object(c.jsx)("ul",{className:"filters",children:n.map((function(t,e){var n=h.key===t.key,r=n?"is-active":void 0;return Object(c.jsx)("li",{children:Object(c.jsx)("button",{className:v()("filter",r),onClick:function(){return j(e=t),void a(e);var e},children:Object(c.jsxs)(c.Fragment,{children:[t.label,n&&S]})},t.label)},e)}))}),Object(c.jsx)("div",{className:"image-types",children:["All","Wide","Portrait"].map((function(t){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("input",{id:"".concat(t,"-label"),onChange:function(){return x(e=t),void s(e);var e},checked:g===t,type:"radio",value:t,name:"type"},"".concat(t,"-input")),Object(c.jsx)("label",{htmlFor:"".concat(t,"-label"),children:t},"".concat(t,"-label"))]})}))}),Object(c.jsx)("div",{className:"search",children:Object(c.jsx)("input",{type:"search",name:"search",className:"search-input",placeholder:"Search",value:N,onChange:function(t){C(t.target.value),o(t.target.value.toLowerCase())}})})]})},p=function(t){var e=t.image,n=void 0===e?{}:e,r=t.show,i=t.onClose,a=t.data,s=t.onPrev,o=t.onNext,u=r?"is-visible":void 0,l=a.findIndex((function(t){return t.id===n.id}))<=0,h=a.findIndex((function(t){return t.id===n.id}))>=a.length;return Object(c.jsxs)("div",{className:v()("image-viewer",u),onClick:i,children:[Object(c.jsxs)("div",{className:"image-nav",children:[Object(c.jsx)("button",{className:"image-nav-button left",disabled:l,onClick:s,children:"[ Prev ]"}),Object(c.jsx)("button",{className:"image-nav-button right",disabled:h,onClick:o,children:"[ Next ]"})]}),Object(c.jsxs)("div",{className:"image-viewer-content",children:[n&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{alt:n.gameName,src:n.shotUrl,onClick:function(t){t.stopPropagation()}}),Object(c.jsxs)("div",{className:"author",onClick:function(t){t.stopPropagation()},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"by"})," ",Object(c.jsx)("strong",{children:n.author})]}),Object(c.jsx)("div",{className:"title",children:n.gameName})]})]}),Object(c.jsx)("button",{className:"close",onClick:i})]})]})},w=function(t){var e=t.data,n=[{label:"Date",key:"date"},{label:"Reactions",key:"score"}],i=Object(r.useState)([]),a=Object(d.a)(i,2),s=a[0],o=a[1],u=Object(r.useState)(n[0]),l=Object(d.a)(u,2),h=l[0],j=l[1],b=Object(r.useState)("all"),g=Object(d.a)(b,2),v=g[0],O=g[1],m=Object(r.useState)(""),w=Object(d.a)(m,2),N=w[0],C=w[1],S=Object(r.useState)(!1),k=Object(d.a)(S,2),y=k[0],L=k[1],P=Object(r.useState)({}),I=Object(d.a)(P,2),F=I[0],U=I[1],B=Object(r.useState)(!1),E=Object(d.a)(B,2),z=E[0],M=E[1],T=function(t){var e=t,n=h.key,c=function(t,e){return t[n]<e[n]?1:e[n]<t[n]?-1:0};return z&&(c=function(t,e){return t[n]>e[n]?1:e[n]>t[n]?-1:0}),e=t.sort(c),"Wide"===v?e=e.filter((function(t){return t.width>=t.height})):"Portrait"===v&&(e=e.filter((function(t){return t.width<=t.height}))),function(t){return(null===N||void 0===N?void 0:N.length)<3?t:t.filter((function(t){return Object.keys(t).reduce((function(e,n){return e||t[n].toString().toLowerCase().includes(N.toLowerCase())}),!1)}))}(e)};Object(r.useEffect)((function(){if(e.length){var t=T(e.slice());o(t)}}),[e,h,v,N,z]);var W=document.querySelector(".image-grid");return Object(c.jsxs)("div",{style:{margin:"0 auto"},className:"home",children:[Object(c.jsx)(x,{className:y?"hidden":"",options:n,reverseSort:z,updateSort:function(t){t.key===h.key?M((function(t){return!t})):(M(!1),j(t))},updateType:function(t){O(t)},updateSearch:function(t){C(t)}}),s&&W&&Object(c.jsx)(f,{images:s,rowTargetHeight:300,container:W,onClick:function(t){U(t),L(!0)}}),Object(c.jsx)(p,{image:F,show:y,onClose:function(){U({}),L(!1)},data:s,onPrev:function(t){t.stopPropagation();var e=s.findIndex((function(t){return t.id===F.id}));e-1>=0&&U(s[e-1])},onNext:function(t){t.stopPropagation();var e=s.findIndex((function(t){return t.id===F.id}));e+1<=s.length&&U(s[e+1])}})]})};var N=function(){var t=Object(r.useState)([]),e=Object(d.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)(!1),s=Object(d.a)(a,2),o=s[0],b=s[1],f=function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),t.next=3,j.get("".concat("https://raw.githubusercontent.com/originalnicodrgitbot/test-git-python/main/shotsdb.json"));case 3:e=t.sent,n=Object.entries(e.data._default),c=[],n.forEach((function(t){var e=t[0],n=t[1];c.push(Object(l.a)({id:e},n))})),i(c);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){o||f()})),Object(c.jsx)("div",{className:"image-grid",children:n&&Object(c.jsx)(w,{data:n})})},C=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),r(t),i(t),a(t)}))};s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(N,{})}),document.getElementById("root")),C()}},[[45,1,2]]]);
//# sourceMappingURL=main.8c7b25b7.chunk.js.map