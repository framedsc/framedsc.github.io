(this["webpackJsonpjim-framed"]=this["webpackJsonpjim-framed"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),a=n.n(i),c=n(15),s=n.n(c),o=(n(23),n(6)),u=n.n(o),l=n(17),h=n(16),d=n(2),j=(n(25),n(26));function f(e){return{maxWidth:e.clientWidth}}var b=function(e){var t=e.className,n=e.images,a=e.rowTargetHeight,c=void 0===a?400:a,s=e.borderOffset,o=void 0===s?5:s,u=e.container,l=e.onClick,h=function(e){var t=Object(i.useState)(f(e)),n=Object(d.a)(t,2),r=n[0],a=n[1];return Object(i.useEffect)((function(){function t(){a(f(e))}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),r}(u).maxWidth,j=function(e,t){t=t||1;var n=e.height-t;return e.width=e.width*(n/e.height),e.height=n,e},b=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].width;return t+=(e.length-1)*o},v=function(){for(var e=0,t=0,r=0,i=[],a=function(){for(var e=[],t=0;t<n.length;t++){var r=parseInt(n[t].width),i=parseInt(n[t].height);r*=c/i;var a={id:n[t].id,author:n[t].author,authorsAvatarUrl:n[t].authorsAvatarUrl,data:n[t].date,gameName:n[t].gameName,score:n[t].score,fullWidth:n[t].width,fullHeight:n[t].height,shotUrl:n[t].shotUrl,thumbnailUrl:n[t].thumbnailUrl,width:r,height:c};e.push(a)}return e}();a[r];)t>=h&&(e++,t=0),i[e]||(i[e]=[]),i[e].push(a[r]),t+=a[r].width,r++;return i},g=function(e){for(var t=0;t<e.length;t++)(n=e[t]).width=parseInt(n.width),n.height=parseInt(n.height);var n;return e},m=function(e){for(;b(e)>h;)for(var t=0;t<e.length;t++)e[t]=j(e[t]);return e};return function(){for(var e=v(),n=0;n<e.length;n++){e[n]=m(e[n]),e[n]=g(e[n]);var i=h-b(e[n]),a=e[n].length;if(a>1&&i<10){for(var c=i/a,s=0;s<e[n].length;s++)e[n][s].width+=c;e[n]=g(e[n]),e[n][e[n].length-1].width+=h-b(e[n])}}return function(e){return Object(r.jsx)("div",{className:t,children:e.map((function(e,t){return Object(r.jsx)("div",{className:"image-row",children:e.map((function(e,t){return Object(r.jsx)("img",{src:e.thumbnailUrl,style:{marginRight:o,marginBottom:o,width:Math.ceil(e.width),height:e.height,cursor:"pointer"},onClick:function(){return l(e,t)}},t)}))},t)}))})}(e)}()},v=n(4),g=n.n(v),m=function(e){var t=e.filters,n=e.updateFilter,a=e.updateType,c=e.updateSearch,s=Object(i.useState)(0),o=Object(d.a)(s,2),u=o[0],l=o[1],h=Object(i.useState)("All"),j=Object(d.a)(h,2),f=j[0],b=j[1],v=Object(i.useState)(""),m=Object(d.a)(v,2),O=m[0],p=m[1];return Object(r.jsxs)("div",{className:"image-nav",children:[Object(r.jsx)("ul",{className:"filters",children:t.map((function(e){var t=u===e.value?"is-active":void 0;return Object(r.jsx)("li",{children:Object(r.jsx)("button",{className:g()("filter",t),onClick:function(){return l((t=e).value),void n(t);var t},children:e.label},e.label)})}))}),Object(r.jsx)("div",{className:"image-types",children:["All","Wide","Portrait"].map((function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{id:"".concat(e,"-label"),onChange:function(){return b(t=e),void a(t);var t},checked:f===e,type:"radio",value:e,name:"type"},e)," ",Object(r.jsx)("label",{htmlFor:"".concat(e,"-label"),children:e})]})}))}),Object(r.jsx)("div",{className:"search",children:Object(r.jsx)("input",{type:"search",name:"search",className:"search-input",placeholder:"Search",value:O,onChange:function(e){p(e.target.value),c(e.target.value)}})})]})},O=function(e){var t=e.image,n=void 0===t?{}:t,i=e.show,a=e.onClose,c=i?"is-visible":void 0;return Object(r.jsx)("div",{className:g()("image-viewer",c),onClick:a,children:Object(r.jsxs)("div",{className:"image-viewer-content",children:[n&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("img",{src:n.shotUrl,onClick:function(e){e.stopPropagation()}}),Object(r.jsxs)("div",{className:"author",onClick:function(e){e.stopPropagation()},children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"by"})," ",Object(r.jsx)("strong",{children:n.author})]}),Object(r.jsx)("div",{className:"title",children:n.gameName})]})]}),Object(r.jsx)("button",{className:"close",onClick:a})]})})},p=function(e){var t=e.data,n=Object(i.useState)([]),a=Object(d.a)(n,2),c=a[0],s=a[1],o=Object(i.useState)(0),u=Object(d.a)(o,2),l=u[0],h=u[1],j=Object(i.useState)("all"),f=Object(d.a)(j,2),v=f[0],g=f[1],p=Object(i.useState)(""),x=Object(d.a)(p,2),w=x[0],S=x[1],N=Object(i.useState)(!1),y=Object(d.a)(N,2),k=y[0],C=y[1],F=Object(i.useState)({}),U=Object(d.a)(F,2),E=U[0],I=U[1],T=Object(i.useState)(0),L=Object(d.a)(T,2),P=(L[0],L[1]),W=[{label:"Home",value:0},{label:"Top 50",value:1,key:"score"},{label:"Latest 50",value:2,key:"date"}],A=function(e){var t,n=W[l].key;return t=0===l?e:e.sort((function(e,t){return e[n]<t[n]?1:t[n]<e[n]?-1:0})).slice(0,50),"Wide"===v?t=t.filter((function(e){return e.width>=e.height})):"Portrait"===v&&(t=t.filter((function(e){return e.width<=e.height}))),function(e){return(null===w||void 0===w?void 0:w.length)<3?e:e.filter((function(e){return Object.keys(e).reduce((function(t,n){return t||e[n].toString().toLowerCase().includes(w)}),!1)}))}(t)};Object(i.useEffect)((function(){if(t.length){var e=A(t.slice());s(e)}}),[t,l,v,w]);var H=document.querySelector(".image-grid");return Object(r.jsxs)("div",{style:{margin:"0 auto"},className:"home",children:[Object(r.jsx)(m,{filters:W,updateFilter:function(e){h(e.value)},updateType:function(e){g(e)},updateSearch:function(e){S(e)}}),c&&H&&Object(r.jsx)(b,{images:c,rowTargetHeight:300,container:H,onClick:function(e){var t=c.findIndex((function(t){return t.id===e.id}));I(e),C(!0),P(t)}}),Object(r.jsx)(O,{image:E,show:k,onClose:function(){C(!1)}})]})};var x=function(){var e=Object(i.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),s=Object(d.a)(c,2),o=s[0],f=s[1],b=function(){var e=Object(h.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,j.get("".concat("https://raw.githubusercontent.com/originalnicodrgitbot/test-git-python/main/shotsdb.json"));case 3:t=e.sent,n=Object.entries(t.data._default),r=[],n.forEach((function(e){var t=e[0],n=e[1];r.push(Object(l.a)({id:t},n))})),a(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o||b()})),Object(r.jsx)("div",{className:"image-grid",children:n&&Object(r.jsx)(p,{data:n})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root")),w()}},[[45,1,2]]]);
//# sourceMappingURL=main.3f28ed78.chunk.js.map